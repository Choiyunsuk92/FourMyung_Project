<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fourMyung.mapper.MemberMapper" >
<sql id="basecolumn">
	MEM_DIV_CD, USER_ID, USER_PASS, USER_NM, USER_BIRTH, 
	USER_EMAIL, USER_PH, USER_ADDR, USER_GENDER, JOIN_DT, JOIN_OK  
</sql>

<insert id="insertMember" parameterType="fourMyung.domain.member.MemberDTO">
	insert into c_member ( <include refid="basecolumn" />  )
		values(#{memDivCd}, #{userId}, #{userPass}, #{userNm}, #{userBirth},
		#{userEmail}, #{userPh}, #{userAddr}, #{userGender}, sysdate, null)
</insert>

<update id="joinOkUpdate" parameterType="fourMyung.domain.member.MemberDTO">
	update c_member
	set join_ok = #{joinOk}
	where user_id = #{userId} and USER_EMAIL = #{userEmail}
	and join_ok is null
</update>

<resultMap type="fourMyung.domain.member.MemberDTO" id="baseMember" >
	<constructor>
		<idArg column="user_Id" javaType="string" />
		<arg column="MEM_DIV_CD" javaType="string" />
		<arg column="USER_PASS" javaType="string" />
		<arg column="USER_NM" javaType="string" />
		<arg column="USER_BIRTH" javaType="java.sql.Timestamp"/>
		<arg column="USER_EMAIL" javaType="string" />
		<arg column="USER_PH" javaType="string" />
		<arg column="USER_ADDR" javaType="string" />
		<arg column="USER_GENDER" javaType="string" />
		<arg column="JOIN_DT" javaType="java.sql.Timestamp" />
		<arg column="JOIN_OK" javaType="string" />
	</constructor>
</resultMap>

<select id="selectByMember" parameterType="fourMyung.domain.member.MemberDTO" resultMap="baseMember">
	select <include refid="basecolumn" /> 
	FROM C_MEMBER 
	WHERE USER_ID = #{userId}

</select>

</mapper>